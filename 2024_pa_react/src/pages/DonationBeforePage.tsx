import * as React from 'react';import { loadStripe } from '@stripe/stripe-js';// @ts-ignoreimport Cookies from 'js-cookie';import { useNavigate } from 'react-router-dom';// @ts-ignoreimport Navbar from "../components/NavBar.tsx";// @ts-ignoreimport Footer from "../components/Footer.tsx";// @ts-ignoreimport ComposedBackground from "../components/ComposedBackground.tsx";// @ts-ignoreimport AlertMessage from "../components/AlertMessage.tsx";const stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY!);const DonationBeforePage: React.FC = () => {	const navigate = useNavigate();		const [message, setMessage] = React.useState('');	const [amount, setAmount] = React.useState(0);	const [showError, setShowError] = React.useState(false);		const handleSubmit = async (e: React.FormEvent) => {		e.preventDefault();				if (amount < 1) {			setShowError(true);			return;		}				try {			const userId = Cookies.get('userId');						if (!userId) {				navigate('/login');				return;			}						const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/donations/create-checkout-session`, {				method: 'POST',				headers: {					'Content-Type': 'application/json',				},				body: JSON.stringify({					amount: amount * 100,					userId,					type: "donation",					paymentMethod: 'card',					message,				}),				credentials: 'include'			});						if (!response.ok) {				throw new Error('An error occurred while creating the checkout session');			}						const session = await response.json();			const stripe = await stripePromise;			if (stripe) {				const { error } = await stripe.redirectToCheckout({					sessionId: session.id,				});								if (error) {					console.error('Stripe redirect error:', error);				}			}		} catch (error) {			console.error('Error:', error);			setShowError(true);		}	};		return (		<ComposedBackground>			<Navbar />			<div className="d-flex justify-content-center align-items-center min-vh-100">				<div className="container">					<div className="row justify-content-center">						<div className="col-md-6">							{showError && <AlertMessage message="An error occurred. Please try again." type="error" />}							<form onSubmit={handleSubmit} className="p-4 bg-light rounded">								<h2 className="mb-4 text-center">Donation Form</h2>								<div className="mb-3">									<label htmlFor="message" className="form-label">										Message:									</label>									<textarea										id="message"										className="form-control"										value={message}										onChange={(e) => setMessage(e.target.value)}										rows={3}									/>								</div>								<div className="mb-4">									<label htmlFor="amount" className="form-label">										Amount:									</label>									<input										type="number"										id="amount"										className="form-control"										value={amount}										onChange={(e) => setAmount(parseFloat(e.target.value))}										required									/>								</div>								<button type="submit" className="btn btn-dark w-100">									Donate								</button>							</form>						</div>					</div>				</div>			</div>			<Footer/>		</ComposedBackground>	);};export default DonationBeforePage;